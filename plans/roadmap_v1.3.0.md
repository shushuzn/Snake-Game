# v1.3.0 路线图 - 社交与竞技系统

> 预计发布时间：2026年3月

## 核心目标

提升 **growth_momentum** 和 **upgrade_satisfaction** 指标

| 指标 | 当前值 | 目标值 | 预期提升方式 |
|------|--------|--------|--------------|
| growth_momentum | 72.0 | ≥78% | 好友竞争、挑战模式 |
| upgrade_satisfaction | 70.0 | ≥75% | 个人资料、数据可视化 |

## 功能模块

### 1. 好友系统

**目标**：建立玩家间的社交连接，增强游戏粘性

**功能点**：
- [ ] 添加好友（通过用户名/ID搜索）
- [ ] 删除好友
- [ ] 好友列表展示（在线状态、最近游戏时间）
- [ ] 好友请求通知

**技术实现**：
- 使用 localStorage 存储好友列表
- 数据结构：`{ friendId, username, addedAt, lastActive }`

### 2. 好友排行榜

**目标**：增强竞争感，提升玩家留存

**功能点**：
- [ ] 好友专属排行榜
- [ ] 周榜/月榜切换
- [ ] 超越提示（"你已超越好友 XXX！"）
- [ ] 榜单分享

**技术实现**：
- 在现有 leaderboard.js 基础上扩展
- 添加好友筛选功能

### 3. 挑战模式

**目标**：增加玩家互动，提升游戏可玩性

**功能点**：
- [ ] 向好友发起挑战
- [ ] 接受/拒绝挑战
- [ ] 挑战记录（胜率统计）
- [ ] 挑战奖励（经验值加成）

**技术实现**：
- 创建 challenge_friend.js 模块
- 挑战数据结构：`{ challengerId, targetId, mode, status, createdAt, completedAt }`

### 4. 游戏统计面板

**目标**：提供详细数据分析，满足玩家成长需求

**功能点**：
- [ ] 总游戏场次、胜率
- [ ] 平均分、最高分趋势图
- [ ] 模式偏好分析
- [ ] 道具使用统计
- [ ] 时间段分析（什么时间段表现最好）

**技术实现**：
- 创建 statistics.js 模块
- 使用 Canvas 绘制图表
- 数据结构：`{ totalGames, wins, losses, avgScore, bestScore, modeStats, itemStats }`

### 5. 个人资料页面

**目标**：展示玩家成就，增强归属感

**功能点**：
- [ ] 玩家等级和经验值展示
- [ ] 已解锁成就展示
- [ ] 最近游戏记录
- [ ] 个人最佳成绩
- [ ] 自定义头像/昵称

**技术实现**：
- 创建 profile.js 模块
- UI 设计：卡片式布局

### 6. 分享功能增强

**目标**：扩大游戏传播，吸引新玩家

**功能点**：
- [ ] 分享成就到社交媒体
- [ ] 高分截图生成
- [ ] 邀请好友链接
- [ ] 分享奖励（邀请成功获得奖励）

**技术实现**：
- 使用 html2canvas 生成截图
- 创建 share.js 模块

## UI/UX 设计

### 新增面板布局

```
┌─────────────────────────────────────┐
│  个人资料  │  好友列表  │  统计面板  │
├─────────────────────────────────────┤
│                                     │
│     [ 个人资料卡片 ]                │
│     - 头像、等级、经验值            │
│     - 最近成就                      │
│     - 编辑按钮                      │
│                                     │
├─────────────────────────────────────┤
│                                     │
│     [ 好友排行榜 ]                  │
│     - 好友列表 + 分数排名           │
│     - 挑战按钮                      │
│                                     │
├─────────────────────────────────────┤
│                                     │
│     [ 数据统计图表 ]                │
│     - 分数趋势图                    │
│     - 模式偏好饼图                  │
│     - 时间段热力图                  │
│                                     │
└─────────────────────────────────────┘
```

## 开发计划

### 阶段 1：好友系统基础（Week 1）
- [ ] 好友数据结构定义
- [ ] 添加/删除好友功能
- [ ] 好友列表 UI

### 阶段 2：排行榜与挑战（Week 2）
- [ ] 好友排行榜筛选
- [ ] 挑战模式设计
- [ ] 挑战记录存储

### 阶段 3：统计面板（Week 3）
- [ ] 数据收集逻辑
- [ ] 统计图表绘制
- [ ] 统计面板 UI

### 阶段 4：个人资料与分享（Week 4）
- [ ] 个人资料页面
- [ ] 截图生成
- [ ] 分享功能

## 技术依赖

- **图表库**：Chart.js 或原生 Canvas API
- **截图库**：html2canvas
- **存储**：localStorage（延续现有方案）

## 风险评估

| 风险 | 影响 | 缓解措施 |
|------|------|----------|
| localStorage 存储限制 | 中 | 定期清理旧数据，压缩存储 |
| 性能问题（图表渲染） | 低 | 懒加载，虚拟滚动 |
| 社交功能过于复杂 | 中 | 保持简洁，先实现核心功能 |

## 成功指标

- [ ] 玩家添加好友的平均数量 ≥ 3
- [ ] 挑战模式使用率 ≥ 20%
- [ ] 统计面板访问率 ≥ 40%
- [ ] growth_momentum 提升至 78%+
- [ ] upgrade_satisfaction 提升至 75%+

---

*创建于 2026-02-27*
*最后更新 2026-02-27*